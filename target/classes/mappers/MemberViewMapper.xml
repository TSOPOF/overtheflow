<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.overtheflow.dao.MemberViewMapper">
	<resultMap id="result" type="com.overtheflow.vo.MemberViewVO">
		<id property="memberNo" column="member_no" />
		<id property="memberClassNo" column="member_class_no" />
		<id property="memberId" column="member_id" />
		<id property="memberNickname" column="member_nickname" />
		<id property="memberEmail" column="member_email" />
		<id property="memberPassword" column="member_password" />
		<id property="memberName" column="member_name" />
		<id property="memberIntro" column="member_intro" />
		<id property="memberRegDate" column="member_reg_date" />
		<id property="memberClassName" column="member_class_name"/>
		<id property="maxStorageSize" column="max_storage_size"/>
	</resultMap>
	<select id="getMember" parameterType="int" resultMap="result">
		select * from member_view where member_no=#{memberNo}
	</select>
	<select id="getMembers" parameterType="map" resultMap="result">
			select * from member_view
			<where>
				<if test="memberClassNo!=null">
					member_class_no=#{memberClassNo}
				</if>
				<if test="memberId!=null">
					and member_id=#{memberId}
				</if>
				<if test="memberNickname!=null">
					and member_nickname like '%${memberNickname}%'
				</if>
				<if test="memberEmail!=null">
					and member_email=#{memberEmail}
				</if>
				<if test="memberPassword!=null">
					and member_password=#{memberPassword}
				</if>
				<if test="memberName!=null">
					and member_name=#{memberName}
				</if>
				<if test="memberIntro!=null">
					and member_intro='%${memberIntro}%'
				</if>
				<if test="orderColumn!=null">
					order by ${orderColumn}
				</if>
			</where>
	</select>
	<select id="getAll" resultMap="result">
		select * from member_view
	</select>
</mapper>	